// Copyright Tempo Simulation, LLC. All Rights Reserved

syntax = "proto3";

import "TempoScripting/Empty.proto";

message InstanceSemanticIdPair {
  int32 InstanceId = 1;
  int32 SemanticId = 2;
}

message InstanceToSemanticIdMap {
  repeated InstanceSemanticIdPair instance_semantic_id_pairs = 1;
}

message ActorLabelInfo {
  string actor_name = 1;
  string actor_type = 2;
  int32 semantic_id = 3;
  int32 instance_id = 4;  // For Instance mode correlation
}

message GetAllActorLabelsRequest {
}

message GetAllActorLabelsResponse {
  repeated ActorLabelInfo actors = 1;
}

message GetLabeledActorTypesRequest {
}

message GetLabeledActorTypesResponse {
  repeated string actor_types = 1; // List of actor class names with active instance IDs
}

message SemanticClassInfo {
  string name = 1;                   // e.g., "Pedestrian", "Car"
  int32 label_id = 2;                // e.g., 12, 14 (the semantic ID)
  repeated string actor_types = 3;   // Actor types assigned to this class
}

message GetSemanticClassesRequest {
}

message GetSemanticClassesResponse {
  repeated SemanticClassInfo classes = 1;
}

message SetActorTypeSemanticIdRequest {
  string actor_type = 1;    // e.g., "CBP_QuantumCharacter_C" (class name)
  int32 semantic_id = 2;    // 0-255 to set, -1 to revert to DataTable default
}

service LabelService {
  rpc GetInstanceToSemanticIdMap(TempoScripting.Empty) returns (InstanceToSemanticIdMap);
  rpc GetAllActorLabels(GetAllActorLabelsRequest) returns (GetAllActorLabelsResponse);
  rpc GetLabeledActorTypes(GetLabeledActorTypesRequest) returns (GetLabeledActorTypesResponse);
  rpc GetSemanticClasses(GetSemanticClassesRequest) returns (GetSemanticClassesResponse);
  rpc SetActorTypeSemanticId(SetActorTypeSemanticIdRequest) returns (TempoScripting.Empty);
}
